-- [[ NOTICAX v4 - CORREÇÃO DE TELA INVISÍVEL ]] --

local Players = game:GetService("Players")
local Lighting = game:GetService("Lighting")
local TweenService = game:GetService("TweenService")

local LocalPlayer = Players.LocalPlayer
-- Espera o PlayerGui existir de verdade antes de tentar colocar algo
local PlayerGui = LocalPlayer:WaitForChild("PlayerGui", 10) 

if not PlayerGui then 
    warn("PlayerGui não encontrado! Tentando CoreGui...")
    PlayerGui = game:GetService("CoreGui")
end

-- 1. Limpeza (Remove versões antigas para não bugar)
for _, v in pairs(PlayerGui:GetChildren()) do
    if v.Name == "Noticax_Fix_Screen" then v:Destroy() end
end
for _, v in pairs(Lighting:GetChildren()) do
    if v.Name == "NoticaxBlur" then v:Destroy() end
end

-- 2. Criação da Interface (Blindada)
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "Noticax_Fix_Screen"
ScreenGui.Parent = PlayerGui
ScreenGui.IgnoreGuiInset = true
ScreenGui.ResetOnSpawn = false
ScreenGui.DisplayOrder = 10000 -- [[ FORÇA FICAR NA FRENTE DE TUDO ]]

-- Fundo Desfocado (Blur)
local Blur = Instance.new("BlurEffect")
Blur.Name = "NoticaxBlur"
Blur.Size = 24
Blur.Parent = Lighting

-- Som
local Sound = Instance.new("Sound")
Sound.SoundId = "rbxassetid://1837126786" -- Música Chill
Sound.Volume = 2
Sound.Looped = true
Sound.Parent = ScreenGui
Sound:Play()

-- Fundo Preto Transparente
local Overlay = Instance.new("Frame")
Overlay.Parent = ScreenGui
Overlay.Size = UDim2.new(1, 0, 1, 0)
Overlay.BackgroundColor3 = Color3.new(0,0,0)
Overlay.BackgroundTransparency = 0.2

-- [[ JANELA PRINCIPAL ]] --
local MainFrame = Instance.new("Frame")
MainFrame.Name = "JanelaManutencao"
MainFrame.Parent = ScreenGui
MainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
-- MUDANÇA: Tamanho relativo (80% da largura, 50% da altura) para caber em qualquer celular
MainFrame.Size = UDim2.new(0.85, 0, 0.55, 0) 
MainFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 24)
MainFrame.BorderSizePixel = 0

-- Bordas Arredondadas
local Corner = Instance.new("UICorner")
Corner.CornerRadius = UDim.new(0, 16)
Corner.Parent = MainFrame

-- Borda RGB Brilhante
local Stroke = Instance.new("UIStroke")
Stroke.Thickness = 3
Stroke.Color = Color3.fromRGB(255, 255, 255)
Stroke.Parent = MainFrame

-- [[ TEXTOS E CONTEÚDO ]] --

-- Título
local Title = Instance.new("TextLabel")
Title.Parent = MainFrame
Title.BackgroundTransparency = 1
Title.Position = UDim2.new(0, 0, 0.05, 0)
Title.Size = UDim2.new(1, 0, 0.2, 0)
Title.Font = Enum.Font.GothamBlack
Title.Text = "NOTICAX v4"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.TextScaled = true -- Ajusta o texto automaticamente

-- Aviso
local SubTitle = Instance.new("TextLabel")
SubTitle.Parent = MainFrame
SubTitle.BackgroundTransparency = 1
SubTitle.Position = UDim2.new(0.05, 0, 0.25, 0)
SubTitle.Size = UDim2.new(0.9, 0, 0.15, 0)
SubTitle.Font = Enum.Font.GothamBold
SubTitle.Text = "MANUTENÇÃO: NOVA OPÇÃO SECRETA"
SubTitle.TextColor3 = Color3.fromRGB(255, 200, 50)
SubTitle.TextScaled = true

-- Timer Gigante
local TimerLabel = Instance.new("TextLabel")
TimerLabel.Parent = MainFrame
TimerLabel.BackgroundTransparency = 1
TimerLabel.Position = UDim2.new(0, 0, 0.5, 0)
TimerLabel.Size = UDim2.new(1, 0, 0.25, 0)
TimerLabel.Font = Enum.Font.GothamBlack
TimerLabel.Text = "24:00:00"
TimerLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TimerLabel.TextScaled = true

-- Ícone Carregando
local LoadingIcon = Instance.new("ImageLabel")
LoadingIcon.Parent = MainFrame
LoadingIcon.BackgroundTransparency = 1
LoadingIcon.AnchorPoint = Vector2.new(0.5, 0.5)
LoadingIcon.Position = UDim2.new(0.5, 0, 0.85, 0)
LoadingIcon.Size = UDim2.new(0.15, 0, 0.15, 0) -- Tamanho proporcional
LoadingIcon.Image = "rbxassetid://3570695787"
LoadingIcon.ImageColor3 = Color3.new(1,1,1)

-- [[ ANIMAÇÕES ]] --

-- Girar ícone
TweenService:Create(LoadingIcon, TweenInfo.new(1, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1), {Rotation = 360}):Play()

-- RGB Loop
task.spawn(function()
    local hue = 0
    local TotalSeconds = 24 * 3600 -- 24 Horas
    
    while ScreenGui.Parent do -- Só roda se a GUI existir
        hue = hue + 0.005
        if hue > 1 then hue = 0 end
        local color = Color3.fromHSV(hue, 0.8, 1)
        
        Stroke.Color = color
        TimerLabel.TextColor3 = color
        LoadingIcon.ImageColor3 = color
        
        -- Timer Falso
        TotalSeconds = TotalSeconds - 0.03
        local h = math.floor(TotalSeconds / 3600)
        local m = math.floor((TotalSeconds % 3600) / 60)
        local s = math.floor(TotalSeconds % 60)
        TimerLabel.Text = string.format("%02d:%02d:%02d", h, m, s)
        
        task.wait(0.03)
    end
end)

